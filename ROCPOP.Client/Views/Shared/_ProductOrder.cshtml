@model ROCPOP.Client.Models.ViewModels.ProductViewModel
@{ 
    Layout = null;
}
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
</div>
<div id="ProdId" data-prod-id="@Model.Id" data-prod-name="@Model.Name" class="modal-body">
    @Html.Hidden("ProdSize")
    @Html.Hidden("ProdQty")
    <div class="row">
        <div class="col-md-6">
            <div class="main-image">
                <div class="main-image-container">
                    <img src="~/images/freshpopcorn_260.jpg" />
                </div>
            </div>
            <div>
                <div class="col-xs-3">
                    <img src="~/organik_theme/images/shop/shop_100x100.jpg" />
                </div>
                <div class="col-xs-3">
                    <img src="~/organik_theme/images/shop/shop_100x100.jpg" />
                </div>
                <div class="col-xs-3">
                    <img src="~/organik_theme/images/shop/shop_100x100.jpg" />
                </div>
                <div class="col-xs-3">
                    <img src="~/organik_theme/images/shop/shop_100x100.jpg" />
                </div>
            </div>
        </div>
        <div class="col-md-6" style="margin-bottom:30px">
            <h4>@Model.Name</h4>
            <p class="body-text">
                Picture yourself in a kaleidoscope of flavor. Here, sea salt and cracked black pepper skies rain crunchy kernels that bring taste buds to attention! Only the Sergeant can call order to the diamond-bright smiles ahead!
            </p>
            <div class="row">
                <div class="col-md-6">
                    <label>Choose a Size:</label>
                    <select id="ProdOpt" class="form-control"  data-bind="options:  products, selectedOptions: selectedProduct,
                       optionsText: 'name',
                       optionsValue: 'price',
                       value: unitPrice">
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Enter Qty:</label>
                    <input id="ProdQTY" class="form-control" type="number" data-bind="value: qty,valueUpdate:'afterkeydown'" min="1"/> 
                </div>
            </div>
        </div>
        <h5 id="ProdPrice" style="position: absolute;bottom: 6px; right:40px" class="ext-price" >$<span data-bind="text: extPrice"></span></h5>
    </div>
</div>
<div class="modal-footer">
    <button id="AddToCart" type="button" class="btn btn-success" data-dismiss="modal">Add To Cart</button>
</div>


<script>
    @*var Product = function (name, price) {
        this.name = name;
        this.price = price;
    };

    // model
    var CartViewModel = function () {
        this.products = ko.observableArray([
            new Product('Small - $@Model.PriceSmall', JSON.stringify(@Model.PriceSmall)),
            new Product('Medium - $@Model.PriceMedium', JSON.stringify(@Model.PriceMedium)),
            new Product('Large - $@Model.PriceLarge', JSON.stringify(@Model.PriceLarge))
        ]),
        this.selectedProduct = ko.observableArray([]);
        this.unitPrice = ko.observable();
        this.qty = ko.observable(1);
        this.size = ko.observable("SM");
        this.extPrice = ko.computed(function () {
            var q = Number(this.qty());
            if (q <= 0) {
                this.qty(1);
                q = 1;
            }
            return parseFloat(this.unitPrice() * q).toFixed(2)
        }, this).extend({ notify: 'always' });;
    };
    ko.applyBindings(new CartViewModel());*@
    @*var s = new CartViewModel();
    s.addProduct('Small', @Model.PriceSmall);
    console.log(s.products());
    s.qty(1);
    ko.applyBindings(s);*@
</script>